(()=>{"use strict";var e,t,n,r={13293:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(31601),a=n.n(r),l=n(76314),o=n.n(l)()(a());o.push([e.id,"body {\n    width: 400px;\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n        'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n        'Helvetica Neue', sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    overflow: hidden;\n    /* Prevent the window itself from scrolling */\n    position: relative;\n}\n\ncode {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n        monospace;\n}\n",""]);const c=o},43175:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(31601),a=n.n(r),l=n(76314),o=n.n(l)()(a());o.push([e.id,"",""]);const c=o},86185:(e,t,n)=>{n.d(t,{mE:()=>r});n(96921);class r{static openPage(e){chrome.tabs.query({url:e},t=>{t.length>0&&t[0].id?chrome.tabs.update(t[0].id,{active:!0}):chrome.tabs.create({url:e})})}}},88780:(e,t,n)=>{var r=n(96540),a=n(85072),l=n.n(a),o=n(97825),c=n.n(o),i=n(77659),s=n.n(i),m=n(55056),d=n.n(m),u=n(10540),p=n.n(u),h=n(41113),g=n.n(h),E=n(43175),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=s().bind(null,"head"),f.domAPI=c(),f.insertStyleElement=p();l()(E.A,f);E.A&&E.A.locals&&E.A.locals;var A=n(96921),b=n(86185),v=n(29100),y=n(5076),w=n(35124),_=n(65652),x=n(32483),C=n(15548),k=n(53830),O=n(48742),S=n(20424),I=n(30073),P=n(7527),M=n(12070),T=n(16738),j=n(76320),R=n(95884),L=n(47767),q=n(20264),D=n(48982),U=n(6067),B=n(79511),F=n(6614),V=n(45099),N=n(51510),W=n(46821),$=n(46175),G=n(78746),H=n(79239);function z(){chrome.tabs.query({active:!0,currentWindow:!0},e=>{if(0===e.length||!e[0].id)return void console.error("No active tab found or tab ID is missing.");const t=e[0].id;if(void 0===t)return void console.error("Active tab ID is undefined.");chrome.tabs.sendMessage(t,{action:"simg_startSelection"},e=>{chrome.runtime.lastError?console.warn("Error sending message to content script or no response handler: "+chrome.runtime.lastError.message):console.log("Message sent to content script, response:",e)})})}var Z=n(78291);const X=chrome.storage.session,J=chrome.runtime.getManifest().version,K=e=>{var t;const{t:n}=(0,Z.Bd)(["popup","common"]),a=(0,L.Zp)(),[l,o]=(0,r.useState)(!1),[c,i]=(0,r.useState)(q.D),[s,m]=(0,r.useState)(),[d,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{X.get(["enable_click_download"],e=>{o(e.enable_click_download||!1)}),chrome.storage.local.get([A.V2],e=>{i({...c,...e[A.V2]})}),chrome.tabs.query({active:!0,currentWindow:!0},e=>{e.length>0&&(m(e[0]),e[0].id&&chrome.tabs.sendMessage(e[0].id,{cmd:"get-main-imgs"},{frameId:0},async e=>{if(!e)return;const t=await Promise.all(e.map(e=>(0,G.A)(e.src)));u(t.slice(0,5))}))})},[]);return r.createElement(v.A,{sx:{p:1,display:"flex",flexDirection:"column",gap:2}},r.createElement(r.Fragment,null,r.createElement(v.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:1}},r.createElement(y.A,{target:"_blank",href:A.h4,sx:{display:"flex",alignItems:"center",gap:1,textDecoration:"none",color:"text.primary"}},r.createElement("img",{style:{width:"24px",height:"24px"},src:chrome.runtime.getURL("icon.png"),alt:"logo"}),r.createElement(w.A,{variant:"h6"},n("common:ext_name"))),r.createElement(_.A,{title:n("downloadInstaller")},r.createElement(x.A,{size:"small",onClick:()=>window.open(`${A.h4}/downloadZip`)},r.createElement(D.A,null)))),r.createElement(C.A,null)),r.createElement(k.A,{spacing:1.5},r.createElement(O.A,{onClick:e.downloadCurrentTab,variant:"contained",disableElevation:!0,startIcon:r.createElement(D.A,null)},n("dl_current_tab")),r.createElement(O.A,{onClick:e.downloadAllTabs,variant:"contained",disableElevation:!0,startIcon:r.createElement(U.A,null)},n("dl_all_tabs")),e.extras.map((t,n)=>r.createElement(O.A,{variant:"outlined",onClick:e.handleExtra.bind(void 0,t.name),key:n},(e=>{if("string"==typeof e.title)return e.title;for(var t in e.title)if(navigator.language.match(`^${t}`))return e.title[t];return e.title.default})(t))),(null===(t=null==s?void 0:s.url)||void 0===t?void 0:t.match("detail.1688.com"))&&r.createElement(O.A,{color:"secondary",variant:"contained",onClick:()=>{(null==s?void 0:s.url)&&chrome.tabs.create({url:`${A.ML}/erp/collect?purl=${encodeURIComponent(s.url)}`})}},n("collectProduct","Collect Product"))),r.createElement(S.A,{variant:"outlined",sx:{p:1.5,borderRadius:2}},r.createElement(k.A,{spacing:1,direction:"row"},r.createElement(r.Fragment,null,r.createElement(O.A,{fullWidth:!0,startIcon:r.createElement(B.A,null),onClick:()=>b.mE.openPage(chrome.runtime.getURL("searchImage.html"))},n("simg_image_search")),r.createElement(O.A,{fullWidth:!0,startIcon:r.createElement(F.A,null),onClick:z},n("simg_screenshot_search"))),r.createElement(O.A,{fullWidth:!0,startIcon:r.createElement(V.A,null),onClick:()=>{chrome.permissions.request({permissions:["sidePanel"]},e=>{e&&chrome.sidePanel.setOptions({path:"/sidePanel.html?page=ecTools"},()=>{chrome.windows.getCurrent(e=>{e.id&&chrome.sidePanel.open({windowId:e.id},()=>window.close())})})})}},n("ec_tools")))),d.length>0&&r.createElement(v.A,null,r.createElement(k.A,{direction:"row",spacing:1,justifyContent:"center"},d.map((e,t)=>r.createElement(_.A,{title:n("search_by_this_image","Search by this image"),key:t},r.createElement(v.A,{onClick:()=>chrome.tabs.create({url:chrome.runtime.getURL(`/searchImage.html?imgSrc=${encodeURIComponent(e)}`)}),sx:{cursor:"pointer",border:"2px solid",borderColor:"transparent","&:hover":{borderColor:H.A[500]},borderRadius:1,overflow:"hidden",lineHeight:0}},r.createElement("img",{style:{width:"60px",height:"60px",objectFit:"cover"},src:e,alt:"main image"})))))),r.createElement(I.A,{sx:{bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"}},r.createElement(P.Ay,null,r.createElement(M.A,null,r.createElement(N.A,null)),r.createElement(T.A,{id:"switch-list-label-click-download",primary:n("clickDownload"),secondary:l?n("clickDownloadTip"):""}),r.createElement(j.A,{edge:"end",onChange:e=>{const t=e.target.checked;o(t),X.set({enable_click_download:t}),chrome.tabs.query({active:!0},e=>{e[0]&&e[0].id&&chrome.tabs.reload(e[0].id)})},checked:l,inputProps:{"aria-labelledby":"switch-list-label-click-download"}})),r.createElement(C.A,{component:"li"}),r.createElement(R.A,{onClick:()=>chrome.tabs.create({url:chrome.runtime.getURL("options.html")})},r.createElement(M.A,null,r.createElement(W.A,null)),r.createElement(T.A,{primary:n("settings")})),r.createElement(R.A,{onClick:()=>a("contact")},r.createElement(M.A,null,r.createElement($.A,null)),r.createElement(T.A,{primary:n("contact_us")})),r.createElement(R.A,{onClick:()=>b.mE.openPage(chrome.runtime.getURL("pltool.html"))},r.createElement(M.A,null,r.createElement(V.A,null)),r.createElement(T.A,{primary:n("batch_tools")}))),r.createElement(v.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:1,px:2}},r.createElement(w.A,{variant:"body2",color:"text.secondary"},n("version")),r.createElement(w.A,{variant:"body2",color:"text.secondary"},`V${J}`)))};var Q=n(72916);const Y=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{chrome.commands.getAll(t),chrome.tabs.query({active:!0,currentWindow:!0},e=>{e.length>0&&e[0].id&&chrome.tabs.sendMessage(e[0].id,{cmd:"get_extras"},{frameId:0},e=>{e&&a(e)})})},[]);return r.createElement("div",{className:"App"},r.createElement(K,{downloadCurrentTab:function(){(0,Q.VM)([{name:"download",params:{trigger:"popup"}}]),chrome.runtime.sendMessage({type:"COLLECT_CURRENT_TAB"}),window.close()},downloadAllTabs:function(){(0,Q.VM)([{name:"download-all-tab",params:{trigger:"popup"}}]),chrome.runtime.sendMessage({type:"COLLECT_ALL_TABS"})},openPage:e=>{b.mE.openPage(chrome.runtime.getURL(e))},getShortcut:t=>{let n=e.find(e=>e.name==t);return(null==n?void 0:n.shortcut)||""},extras:n,cmds:e,handleExtra:async e=>{let[t]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});chrome.tabs.sendMessage(t.id,{cmd:A.O5,data:e},{frameId:0}),window.close()}}))};var ee=n(3376),te=n(13293),ne={};ne.styleTagTransform=g(),ne.setAttributes=d(),ne.insert=s().bind(null,"head"),ne.domAPI=c(),ne.insertStyleElement=p();l()(te.A,ne);te.A&&te.A.locals&&te.A.locals;var re=n(85062),ae=n(36465),le=n(84976),oe=n(7915);const ce=()=>{const{t:e}=(0,Z.Bd)(["popup"]);return r.createElement(v.A,{sx:{p:2}},r.createElement(I.A,null,r.createElement(P.Ay,null,r.createElement(M.A,null,r.createElement($.A,null)),r.createElement(T.A,{primary:e("emailSupport","Email Support"),secondary:r.createElement(y.A,{href:`mailto:${A.CD}`,target:"_blank",rel:"noopener"},A.CD)}))))};var ie=n(5338);n(62117);function se(e){const t=(0,L.Zp)(),{t:n}=(0,Z.Bd)(["popup"]);return r.createElement(v.A,null,r.createElement(S.A,{square:!0,elevation:1,sx:{position:"relative",height:"3rem"}},r.createElement(v.A,{sx:{position:"absolute",height:"100%",display:"flex",alignItems:"center"}},r.createElement(x.A,{size:"small",onClick:()=>t(-1),sx:{ml:1}},r.createElement(oe.A,null))),r.createElement(w.A,{variant:"h6",sx:{textAlign:"center",lineHeight:"3rem"}},e.head)),r.createElement(v.A,{sx:{p:2}},e.children))}let me=window.document.querySelector("#app-container");if(me){(0,ie.H)(me).render(r.createElement(function(){const{t:e}=(0,Z.Bd)(["popup"]);return r.createElement(re.A,{theme:ae.w},r.createElement(le.I9,null,r.createElement(L.BV,null,r.createElement(L.qh,{path:"/",element:r.createElement(Y,null)}),r.createElement(L.qh,{path:"/popup",element:r.createElement(Y,null)}),r.createElement(L.qh,{path:"/options",element:r.createElement(se,{head:e("settings","Settings")},r.createElement(ee.A,null))}),r.createElement(L.qh,{path:"/contact",element:r.createElement(se,{head:e("contact_us","Contact Us")},r.createElement(ce,null))}))))},null))}(0,Q.IG)(),window.addEventListener("load",async()=>{(0,Q.VM)([{name:"page_view",params:{page_title:document.title,page_location:document.location.href}}])})},96921:(e,t,n)=>{n.d(t,{CD:()=>c,MG:()=>m,ML:()=>s,O5:()=>a,V2:()=>r,fw:()=>l,h4:()=>d,nD:()=>i,pO:()=>o});const r="STORAGE_APP_CONFIG",a="CMD_EXECUTE_EXTRA",l="dl_current_tab",o="search_img",c="fatkunimage@gmail.com",i="Fatkun",s="https://www.wendaoerp.com",m="https://assets.fatkun.net/",d="https://www.fatkun.net"}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return r[e](n,n.exports,l),n.exports}l.m=r,e=[],l.O=(t,n,r,a)=>{if(!n){var o=1/0;for(m=0;m<e.length;m++){for(var[n,r,a]=e[m],c=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(l.O).every(e=>l.O[e](n[i]))?n.splice(i--,1):(c=!1,a<o&&(o=a));if(c){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[n,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var c=2&r&&e;("object"==typeof c||"function"==typeof c)&&!~t.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,l.d(a,o),a},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=887,(()=>{var e={887:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,c,i]=n,s=0;if(o.some(t=>0!==e[t])){for(r in c)l.o(c,r)&&(l.m[r]=c[r]);if(i)var m=i(l)}for(t&&t(n);s<o.length;s++)a=o[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(m)},n=self.webpackChunkfatkun_v3=self.webpackChunkfatkun_v3||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.nc=void 0;var o=l.O(void 0,[6163,9925,7684,8742,3061,8915,5652,8311,3732,4843,1321,7810,3635,2076],()=>l(88780));o=l.O(o)})();