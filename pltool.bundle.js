(()=>{"use strict";var e,t,n,a={9951:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),l=n(76314),o=n.n(l)()(r());o.push([e.id,"",""]);const s=o},13125:(e,t,n)=>{var a=n(96540),r=n(85072),l=n.n(r),o=n(97825),s=n.n(o),c=n(77659),i=n.n(c),u=n(55056),m=n.n(u),d=n(10540),p=n.n(d),h=n(41113),f=n.n(h),g=n(39531),v={};v.styleTagTransform=f(),v.setAttributes=m(),v.insert=i().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p();l()(g.A,v);g.A&&g.A.locals&&g.A.locals;var A=n(85342),E=n(29100),b=n(64951),_=n(53830),y=n(35124),w=n(4126),O=n(48742),x=n(65836),S=n(82586),j=n(69684),C=n(78291),k=n(86185),I=n(20921),P=n(65505),$=n(29184);const T=()=>{const{t:e}=(0,C.Bd)("batch"),{enqueueSnackbar:t}=(0,I.dh)(),[n,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[i,u]=(0,a.useState)("1");(0,a.useEffect)(()=>{chrome.storage.local.get(["batch_page_last_tab"],e=>{e.batch_page_last_tab&&u(e.batch_page_last_tab)})},[]);return a.createElement("div",{className:"App"},a.createElement(A.A,{container:!0,justifyContent:"center"},a.createElement(A.A,{size:{xs:12,sm:10,md:8,lg:6}},a.createElement(E.A,{sx:{width:"100%"}},a.createElement(x.Ay,{value:i},a.createElement(E.A,{sx:{borderBottom:1,borderColor:"divider",px:2}},a.createElement(S.A,{onChange:(e,t)=>{u(t),chrome.storage.local.set({batch_page_last_tab:t})},"aria-label":"batch operations tabs",centered:!0},a.createElement(b.A,{label:e("open_pages"),value:"1",icon:a.createElement(P.A,null),iconPosition:"start"}),a.createElement(b.A,{label:e("download_images"),value:"2",icon:a.createElement($.A,null),iconPosition:"start"}))),a.createElement(j.A,{value:"1",sx:{p:3}},a.createElement(_.A,{spacing:2},a.createElement(y.A,{variant:"h6",component:"h2"},e("pages")),a.createElement(w.A,{onChange:e=>{r(e.target.value)},fullWidth:!0,multiline:!0,minRows:10,autoFocus:!0,placeholder:e("pages_placeholder"),variant:"outlined",helperText:e("pages_tip"),FormHelperTextProps:{style:{whiteSpace:"pre-line"}}}),a.createElement(O.A,{variant:"contained",onClick:()=>{var e=n.split("\n").filter(e=>""!==e.trim());if(!(e.length<1)){var a=[];e.forEach(function(e){if(""!=e)for(var t=(0,k.yJ)(e),n=0;n<t.length;n++)a.push(t[n])}),a.length>0&&(chrome.windows.create({url:a}),t(`Opened ${a.length} pages.`,{variant:"success"}))}},startIcon:a.createElement(P.A,null)},e("open_all_pages")))),a.createElement(j.A,{value:"2",sx:{p:3}},a.createElement(_.A,{spacing:2},a.createElement(y.A,{variant:"h6",component:"h2"},e("download_images")),a.createElement(w.A,{label:e("folder_name"),onChange:e=>{c(e.target.value)},fullWidth:!0,variant:"outlined"}),a.createElement(w.A,{onChange:e=>{o(e.target.value)},fullWidth:!0,multiline:!0,minRows:10,autoFocus:!0,placeholder:e("download_images_tip"),variant:"outlined"}),a.createElement(O.A,{variant:"contained",onClick:()=>{const e=l.split("\n").filter(e=>""!==e.trim());if(e.length>0){let n=0;e.forEach((a,r)=>{try{let l=new URL(a).pathname;l.endsWith("/")&&(l=l.substring(0,l.length-1));let o=l.substring(l.lastIndexOf("/")+1);o=o.split("?")[0],o=o.split("#")[0],o||(o=`image_${r+1}.jpg`);let c=s?`${s}/${o}`:o;chrome.downloads.download({url:a,filename:c},r=>{chrome.runtime.lastError?(console.error(`Download failed for ${a}: ${chrome.runtime.lastError.message}`),t(`Download failed for ${a}`,{variant:"error"})):(n++,n===e.length&&t(`Successfully started downloading ${n} images.`,{variant:"success"}))})}catch(e){console.error(`Invalid URL: ${a}`),t(`Invalid URL: ${a}`,{variant:"error"})}})}},startIcon:a.createElement($.A,null)},e("download_all_images")))))))))};var M=n(3376),q=n(9951),R={};R.styleTagTransform=f(),R.setAttributes=m(),R.insert=i().bind(null,"head"),R.domAPI=s(),R.insertStyleElement=p();l()(q.A,R);q.A&&q.A.locals&&q.A.locals;var F=n(32483),L=n(85062),W=n(36465),B=n(47767),D=n(84976),H=n(3797),U=n(7915),z=n(72916),G=n(5338),J=n(62117);document.title=J.A.t("batch:title");const N=chrome.i18n.getMessage;let V=window.document.querySelector("#app-container");if(V){(0,G.H)(V).render(a.createElement(I.n,{maxSnack:3},a.createElement(L.A,{theme:W.w},a.createElement(D.I9,null,a.createElement(B.BV,null,a.createElement(B.qh,{path:"/",element:a.createElement(T,null)}),a.createElement(B.qh,{path:"popup",element:a.createElement(T,null)}),a.createElement(B.qh,{path:"options",element:a.createElement(function(e){const t=(0,B.Zp)();return a.createElement(E.A,null,a.createElement(E.A,{sx:{position:"relative",height:"2.4rem",bgcolor:H.A[50]}},a.createElement(E.A,{sx:{position:"absolute",height:"2.4rem",display:"flex",alignItems:"center"}},a.createElement(F.A,{size:"small",onClick:()=>{t("/")},sx:{ml:1}},a.createElement(U.A,null))),a.createElement(y.A,{variant:"body1",sx:{textAlign:"center",lineHeight:"2.4rem"}},e.head)),e.children)},{head:N("settings")},a.createElement(M.A,null))}))))))}(0,z.IG)(),window.addEventListener("load",async()=>{(0,z.VM)([{name:"page_view",params:{page_title:document.title,page_location:document.location.href}}])})},39531:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),l=n(76314),o=n.n(l)()(r());o.push([e.id,"",""]);const s=o},86185:(e,t,n)=>{n.d(t,{yJ:()=>a});n(96921);function a(e){const t=[],n=e.matchAll(/\[(.*?)\]/g);for(const e of n){const n=e[1].split(","),a=[];for(const e of n)if(e.includes("-")&&2===e.split("-").length){const[t,n]=e.split("-");if(/^\d+-\d+$/.test(e)){const e=parseInt(t,10),r=parseInt(n,10);for(let n=e;n<=r;n++)a.push(String(n).padStart(t.length,"0"))}else if(1===t.length&&1===n.length)for(let e=t.charCodeAt(0);e<=n.charCodeAt(0);e++)a.push(String.fromCharCode(e));else a.push(e)}else a.push(e);t.push(a)}const a=/^https?:\/\//;if(0===t.length)return a.test(e)?[e]:[];const r=e.replace(/\[(.*?)\]/g,"%%");let l=[[]];for(const e of t){const t=[];for(const n of l)for(const a of e)t.push([...n,a]);l=t}return l.map(e=>{let t=0;return r.replace(/%%/g,()=>e[t++])}).filter(e=>a.test(e))}},96921:(e,t,n)=>{n.d(t,{MG:()=>o,fw:()=>a,nD:()=>l,pO:()=>r});const a="dl_current_tab",r="search_img",l="Fatkun",o="https://assets.fatkun.net/"}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,exports:{}};return a[e](n,n.exports,l),n.exports}l.m=a,e=[],l.O=(t,n,a,r)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],s=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(l.O).every(e=>l.O[e](n[c]))?n.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var r=Object.create(null);l.r(r);var o={};t=t||[null,n({}),n([]),n(n)];for(var s=2&a&&e;("object"==typeof s||"function"==typeof s)&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,l.d(r,o),r},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=4961,(()=>{var e={4961:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[o,s,c]=n,i=0;if(o.some(t=>0!==e[t])){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(c)var u=c(l)}for(t&&t(n);i<o.length;i++)r=o[i],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(u)},n=self.webpackChunkfatkun_v3=self.webpackChunkfatkun_v3||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.nc=void 0;var o=l.O(void 0,[6163,9925,7684,8742,3061,8915,5008,8311,5728,3732,4843,8555,5342,7810,8047,2076],()=>l(13125));o=l.O(o)})();