(()=>{"use strict";var e,t,n,r={1152:(e,t,n)=>{n.d(t,{A:()=>r});const r=n(97164).A},5338:(e,t,n)=>{var r=n(40961);t.H=r.createRoot,r.hydrateRoot},14292:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(96540);function o(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)}},14808:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(63248).Ay)()},21020:(e,t,n)=>{var r=n(96540),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function p(e,t,n){var r,a={},p=null,c=null;for(r in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:p,ref:c,props:a,_owner:i.current}}t.jsx=p,t.jsxs=p},21124:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(46343),o=n(37498);function a({props:e,name:t,defaultTheme:n,themeId:a}){let l=(0,o.A)(n);return a&&(l=l[a]||l),(0,r.A)({theme:l,name:t,props:e})}},33594:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(31601),o=n.n(r),a=n(76314),l=n.n(a)()(o());l.push([e.id,".App {\n    position: absolute;\n    top: 0px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n    text-align: center;\n    height: 100%;\n    padding: 10px;\n    background-color: #282c34;\n}\n\n.App-logo {\n    height: 30vmin;\n    pointer-events: none;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n    .App-logo {\n        animation: App-logo-spin infinite 20s linear;\n    }\n}\n\n.App-header {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n}\n\n.App-link {\n    color: #61dafb;\n}\n\n@keyframes App-logo-spin {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n}\n",""]);const i=l},46343:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(19750);function o(e){const{theme:t,name:n,props:o}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.A)(t.components[n].defaultProps,o):o}},53948:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(24902),o=n(69438),a=n(43754),l=n(33044);const i=function(e){const{elementType:t,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:s=!1,...p}=e,c=s?{}:(0,l.A)(n,i),{props:d,internalRef:m}=(0,a.A)({...p,externalSlotProps:c}),u=(0,r.A)(m,c?.ref,e.additionalProps?.ref);return(0,o.A)(t,{...d,ref:u},i)}},55212:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(31601),o=n.n(r),a=n(76314),l=n.n(a)()(o());l.push([e.id,"body {\n    width: 600px;\n    padding: 0;\n    margin: 0;\n}\n",""]);const i=l},90727:(e,t,n)=>{n(62117);var r=n(96540),o=n(5338),a=n(85072),l=n.n(a),i=n(97825),s=n.n(i),p=n(77659),c=n.n(p),d=n(55056),m=n.n(d),u=n(10540),f=n.n(u),h=n(41113),g=n.n(h),y=n(33594),v={};v.styleTagTransform=g(),v.setAttributes=m(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=f();l()(y.A,v);y.A&&y.A.locals&&y.A.locals;var A=n(29100),b=n(34164),x=n(21362),w=n(57514),E=n(74848);var O=n(26739),_=n(30482),S=n(13202),j=n(39407),k=n(1321),M=n(96148),P=n(1908);function I(e){return(0,P.Ay)("MuiTypography",e)}(0,M.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const R={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},T=w.A,C=(0,O.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,j.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((0,_.A)(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([e,t])=>"inherit"!==e&&t&&"object"==typeof t).map(([e,t])=>({props:{variant:e},style:t})),...Object.entries(e.palette).filter((0,k.A)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,e])=>"string"==typeof e).map(([t])=>({props:{color:`text${(0,j.A)(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:e})=>"inherit"!==e.align,style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),B={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},N=r.forwardRef(function(e,t){const{color:n,...r}=(0,S.b)({props:e,name:"MuiTypography"}),o=T({...r,...!R[n]&&{color:n}}),{align:a="inherit",className:l,component:i,gutterBottom:s=!1,noWrap:p=!1,paragraph:c=!1,variant:d="body1",variantMapping:m=B,...u}=o,f={...o,align:a,color:n,className:l,component:i,gutterBottom:s,noWrap:p,paragraph:c,variant:d,variantMapping:m},h=i||(c?"p":m[d]||B[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:a,classes:l}=e,i={root:["root",a,"inherit"!==e.align&&`align${(0,j.A)(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return(0,x.A)(i,I,l)})(f);return(0,E.jsx)(C,{as:h,ref:t,className:(0,b.A)(g.root,l),...u,ownerState:f,style:{..."inherit"!==a&&{"--Typography-textAlign":a},...u.style}})});var z=n(67221),D=n(85342),L=n(48742),V=n(29184),W=n(3797),H=n(16290);const $=(0,H.A)((0,E.jsx)("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),F=(0,H.A)((0,E.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),U=(0,H.A)((0,E.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var q=n(65652),J=n(32483);function Y({image:e,onDownload:t,downloadId:n}){const[o,a]=(0,r.useState)(!1);return r.createElement(A.A,null,"VIDEO"==e.type?r.createElement("video",{style:{objectFit:"contain",width:"100%"},src:e.src,controls:!0}):r.createElement("img",{onLoad:()=>{a(!0)},style:{objectFit:"contain",width:"100%"},src:e.src,alt:""}),(o||"VIDEO"==e.type)&&r.createElement(A.A,{sx:{display:"flex",justifyContent:"space-around"}},n?r.createElement(q.A,{placement:"top",title:chrome.i18n.getMessage("re_download")},r.createElement(J.A,{size:"small",onClick:t},r.createElement($,null))):r.createElement(q.A,{placement:"top",title:chrome.i18n.getMessage("download")},r.createElement(J.A,{onClick:t,size:"small"},r.createElement(V.A,null))),n&&r.createElement(q.A,{placement:"top",title:chrome.i18n.getMessage("show_in_folder")},r.createElement(J.A,{onClick:()=>{chrome.downloads.show(n)},size:"small"},r.createElement(F,null))),r.createElement(q.A,{placement:"top",title:chrome.i18n.getMessage("open_in_new")},r.createElement(J.A,{onClick:()=>{window.open(e.src,"_blank")},size:"small"},r.createElement(U,null)))))}var G=n(63625),K=n(78291);const Q=()=>{const{t:e}=(0,K.Bd)("popupIns"),[t,n]=(0,r.useState)([]),[o,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)([]);(0,r.useEffect)(()=>{a(!0),chrome.tabs.query({active:!0},e=>{var t;let r=e[0];r&&r.id&&((null===(t=r.url)||void 0===t?void 0:t.match("www.instagram.com"))?chrome.tabs.sendMessage(r.id,{cmd:"popup-get-imgs"},{frameId:0},e=>{console.log(e),n(e),a(!1)}):location.href=chrome.runtime.getURL("/popup.html"))}),chrome.storage.session.get("downloaded",e=>{i(e.downloaded||[])})},[]);const s=async e=>{let t=[];for(let n of e){let r=await chrome.downloads.download({url:n.src,filename:`instagram/${(0,G.RN)(e.indexOf(n)+1,3)}.${"VIDEO"==n.type?"mp4":"jpg"}`});t.push({image:n.src,downloadId:r})}let n=[...t,...l].slice(0,500);chrome.storage.session.set({downloaded:n},()=>{i(n)})};return r.createElement(A.A,{sx:{p:3,display:"flex",flexDirection:"column",gap:2,maxHeight:"600px",overflow:"hidden",boxSizing:"border-box"}},r.createElement(A.A,{className:"popup-header",sx:{display:"flex",alignItems:"center",gap:2}},r.createElement(N,{variant:"h6"},chrome.runtime.getManifest().name)),o&&r.createElement(z.A,{sx:{width:"100%"}}),r.createElement(A.A,{sx:{overflow:"hidden",display:"flex",flexDirection:"column",gap:2}},r.createElement(D.A,{sx:{overflow:"auto",flex:1},container:!0,spacing:1},t.map((e,t)=>{var n;return r.createElement(D.A,{key:e.src,size:3,sx:{border:"1px solid",borderColor:W.A[200]}},r.createElement(Y,{image:e,downloadId:null===(n=l.find(t=>t.image==e.src))||void 0===n?void 0:n.downloadId,onDownload:()=>{s([e])}}))})),r.createElement(A.A,{sx:{display:"flex"}},r.createElement(A.A,{sx:{ml:"auto"}},r.createElement(L.A,{onClick:()=>{s(t.map((e,t)=>({src:e.src,index:t})))},startIcon:r.createElement(V.A,null)},e("download"))))))};var X=n(55212),Z={};Z.styleTagTransform=g(),Z.setAttributes=m(),Z.insert=c().bind(null,"head"),Z.domAPI=s(),Z.insertStyleElement=f();l()(X.A,Z);X.A&&X.A.locals&&X.A.locals;const ee=document.getElementById("app-container");if(ee){(0,o.H)(ee).render(r.createElement(Q,null))}},96540:(e,t,n)=>{e.exports=n(15287)},97164:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(96540);function o(e){const{controlled:t,default:n,name:o,state:a="value"}=e,{current:l}=r.useRef(void 0!==t),[i,s]=r.useState(n);return[l?t:i,r.useCallback(e=>{l||s(e)},[])]}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,o)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,r,o]=e[c],i=!0,s=0;s<n.length;s++)(!1&o||l>=o)&&Object.keys(a.O).every(e=>a.O[e](n[s]))?n.splice(s--,1):(i=!1,o<l&&(l=o));if(i){e.splice(c--,1);var p=r();void 0!==p&&(t=p)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var l={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;("object"==typeof i||"function"==typeof i)&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach(t=>l[t]=()=>e[t]);return l.default=()=>e,a.d(o,l),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=6540,(()=>{var e={6540:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[l,i,s]=n,p=0;if(l.some(t=>0!==e[t])){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(s)var c=s(a)}for(t&&t(n);p<l.length;p++)o=l[p],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self.webpackChunkfatkun_v3=self.webpackChunkfatkun_v3||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var l=a.O(void 0,[6163,9925,7684,8742,5652,5342,6859,6716,2076],()=>a(90727));l=a.O(l)})();