(()=>{"use strict";const e="wendaokj";let t=!1,o=[];function n(e){const t=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send,n=XMLHttpRequest.prototype.setRequestHeader,a=XMLHttpRequest.prototype.getResponseHeader,r=XMLHttpRequest.prototype.getAllResponseHeaders;let s=!0;return XMLHttpRequest.prototype.open=function(e,o,n,a,r){o.toString().match("/ws/")||console.log(5555,o),this._hookedUrl=o,this._hookedMethod=e,t.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){this._hookedHeaders||(this._hookedHeaders={}),this._hookedHeaders[e]=t,n.apply(this,arguments)},XMLHttpRequest.prototype.send=function(t){const a=this,r=this._hookedUrl,s=this._hookedMethod,i=this._hookedHeaders||{};try{e.onRequest&&e.onRequest(a,String(r),s,t);let o=i;if(e.onBeforeSend){const d=e.onBeforeSend(a,String(r),s,t,i);if(d){o=d;for(const e in i)n.apply(a,[e,null]);for(const e in o)n.apply(a,[e,o[e]])}}a.addEventListener("load",()=>{try{e.onResponse&&e.onResponse(a,String(r),s,t,a.response)}catch(e){console.error("Error in onResponse hook:",e)}}),a.addEventListener("readystatechange",()=>{if(a.readyState===XMLHttpRequest.HEADERS_RECEIVED)try{e.onHeadersReceived&&e.onHeadersReceived(a,String(r),s)}catch(e){console.error("Error in onHeadersReceived hook:",e)}}),a.addEventListener("error",o=>{try{e.onError&&e.onError(a,String(r),s,t,o)}catch(e){console.error("Error in onError hook:",e)}}),a.addEventListener("abort",o=>{try{e.onError&&e.onError(a,String(r),s,t,o)}catch(e){console.error("Error in onError hook (abort):",e)}})}catch(e){console.error("Error in hook:",e)}o.apply(this,[t])},XMLHttpRequest.prototype.getResponseHeader=function(e){return a.apply(this,arguments)},XMLHttpRequest.prototype.getAllResponseHeaders=function(){return r.apply(this,arguments)},()=>{s?(XMLHttpRequest.prototype.open=t,XMLHttpRequest.prototype.send=o,XMLHttpRequest.prototype.setRequestHeader=n,XMLHttpRequest.prototype.getResponseHeader=a,XMLHttpRequest.prototype.getAllResponseHeaders=r,s=!1,console.log("XMLHttpRequest unhooked.")):console.warn("XMLHttpRequest already unhooked.")}}window.addEventListener("message",e=>{"fb-ct-ready"==e.data.cmd&&(t=!0,window.postMessage({cmd:"fb-list",data:o},"*"))});let a=[],r=!1;window.addEventListener("message",e=>{"ig-ct-ready"==e.data.cmd&&(r=!0,window.postMessage({cmd:"ig-p-infos",data:a},"*"))}),function(){const e=window;if(location.href.match("mobile.yangkeduo.com/goods.*.html")){const t=window.JSON.parse;window.JSON.parse=function(e){const o=t(e);return o.goods&&o.sku&&window.postMessage({topic:"ftk-set-data",data:{from:"hook",data:o}},"*"),o};let o=setInterval(()=>{e.rawData&&(window.postMessage({topic:"ftk-set-data",data:JSON.parse(JSON.stringify(e.rawData))},"*"),clearInterval(o))},1e3)}}(),function(){const e=window;if(location.href.match("mercadolibre.com")){let t=setInterval(()=>{e.__PRELOADED_STATE__.initialState.components&&(window.postMessage({topic:"ftk-set-data",data:{ftk_pictures:e.__PRELOADED_STATE__.initialState.components.gallery.pictures,ftk_variations:e.__PRELOADED_STATE__.initialState.components.variations}},"*"),clearInterval(t))},1e3)}}(),function(){const e=window;if(location.href.match("www\\.lazada\\..*/products")){let t=setInterval(()=>{e.__moduleData__&&(window.postMessage({topic:"ftk-set-data",data:{__moduleData__:e.__moduleData__}},"*"),clearInterval(t))},1e3)}}(),function(){const e=window;if(location.href.match("www.temu.com/.*\\.html")){let t=setInterval(()=>{e.rawData&&(window.postMessage({topic:"ftk-set-data",data:{rawData:{store:e.rawData.store}}},"*"),clearInterval(t))},1e3)}}(),function(){const e=window;if(location.href.match("wendaoerp.com")){let t=setInterval(()=>{e.product&&(window.postMessage({topic:"ftk-set-data",data:e.product},"*"),clearInterval(t))},1e3)}}(),function(){let e=0,t=window,o=setInterval(()=>{t.Shopify&&(window.postMessage({topic:"ftk-set-data",data:{Shopify:{shop:t.Shopify.shop}}},"*"),clearInterval(o)),e++,e>50&&clearInterval(o)},100)}(),function(){if(location.href.match(/google\.com\/search/)){let e=0,t=setInterval(()=>{e++,e>50&&clearInterval(t);const o=document.querySelectorAll('[jsdata^="j0Opre"]');if(o.length>0){clearInterval(t);const e={};o.forEach(t=>{const o=(t.getAttribute("jsdata")||"").split(";")[2];o&&(e[o]=function(e){const t=window.W_jd[e],o=Object.getOwnPropertySymbols(t);let n=null;for(const e of o)if(void 0===e.description){n=e;break}if(n){const e=t[n];if(e&&e.hasOwnProperty("Np"))return e.Np[1].Np;console.error("使用 Symbol() 访问到的值不是一个对象，或者该对象没有 Np 属性。")}else console.error("对象中未找到没有描述的 Symbol() 键。")}(o))}),window.postMessage({cmd:"google-nps",data:e},"*")}},100)}}(),location.href.match("www.instagram.com/.*?(p|reel)/")&&n({onResponse:(e,t,o,n,s)=>{if(t.match("/api/v1/media/\\d+/info/")||t.match("/graphql/query")){let e=JSON.parse(s);t.match("/graphql/query")&&(e=e.data.xdt_api__v1__media__shortcode__web_info),e&&(r?window.postMessage({cmd:"ig-p-info",data:e},"*"):a.push(e))}}}),location.href.match("www.facebook.com"),function(){var t;if(location.href.match(`1688.com.*kj_agent_plugin=${e}`)){let t=0;const o=()=>{t>0||(t++,window.dispatchEvent(new CustomEvent("service-plugin-dock-event",{detail:{type:"register",name:e}})))};window._ServicePluginDockInit?o():window.addEventListener("service-plugin-dock-event-init",e=>o(),!1);let n=setInterval(()=>{t>0&&clearInterval(n),o()},1e3)}parent!=window&&location.href.match("1688.com")&&(window.addEventListener("message",e=>{"kj-agent-plugin-reply"==e.data.cmd&&window.addEventListener("click",e=>{var t;const o=e.target.closest("a");if(o&&o.href.match("detail.1688.com/offer")){const n=null===(t=o.href.match(/offer\/(\d+)\.html/))||void 0===t?void 0:t[1];n&&(e.preventDefault(),e.stopPropagation(),window.parent.postMessage({cmd:"open-1688-offer",data:{offerId:n}},"*"))}},!0)}),null===(t=window.parent)||void 0===t||t.postMessage({cmd:"check-1688-kj-agent-plugin"},"*"))}(),window,window==top&&location.href.match("item.jd.com")&&window.addEventListener("message",e=>{"get-shop-id"==e.data.cmd&&window.postMessage({cmd:"get-shop-id-return",data:window.pageConfig.product.shopId})})})();